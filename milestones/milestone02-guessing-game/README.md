# Milestone 2: 終極密碼遊戲 | Number Guessing Game

## 📋 專案資訊

| 項目 | 內容 |
|:-----|:-----|
| **整合章節** | Ch04 條件判斷、Ch05 基礎迴圈、Ch06 進階迴圈 |
| **建議時數** | 6-8 小時 |
| **難度等級** | ⭐⭐☆☆☆ (中等) |
| **專案類型** | 互動式遊戲 |

---

## 🎯 專案目標

### 整合知識點

本專案整合以下章節的核心概念：

**Ch04 - 條件判斷 (Conditional Statements)**
- `if-elif-else` 多重條件判斷
- 比較運算子 (`>`, `<`, `==`)
- 布林邏輯
- 巢狀條件判斷

**Ch05 - 基礎迴圈 (Basic Loops)**
- `while` 迴圈基礎
- 迴圈控制變數
- `break` 與 `continue`
- 迴圈結束條件設計

**Ch06 - 進階迴圈 (Advanced Iteration)**
- 複雜迴圈邏輯
- 迴圈計數器應用
- 巢狀迴圈 (進階功能)
- 迴圈與條件的結合運用

---

## 📖 專案描述

### 遊戲背景

終極密碼 (Ultimate Password) 是一個經典的數字猜測遊戲。電腦會隨機選擇一個範圍內的數字作為「密碼」，玩家需要透過邏輯推理和策略猜測，在有限的次數內找出正確答案。

### 遊戲規則

1. **隨機數生成**：系統隨機產生 1-100 之間的整數作為答案
2. **玩家猜測**：玩家輸入猜測的數字
3. **提示機制**：
   - 若猜測 > 答案：顯示「太大了！」
   - 若猜測 < 答案：顯示「太小了！」
   - 若猜測 = 答案：顯示「答對了！」並結束遊戲
4. **次數限制**：最多只有 7 次猜測機會
5. **勝負判定**：
   - 在 7 次內答對 → 玩家勝利
   - 用完 7 次仍未答對 → 玩家失敗，公布答案

### 遊戲流程

```
開始遊戲
    ↓
產生隨機數 (1-100)
    ↓
玩家輸入猜測
    ↓
判斷猜測結果 ──→ 答對了？ ──是──→ 顯示勝利訊息 → 結束
    ↓
    否
    ↓
顯示「太大」或「太小」
    ↓
次數用完？ ──是──→ 顯示失敗訊息 → 結束
    ↓
    否
    ↓
回到「玩家輸入猜測」
```

---

## 🎓 學習成果

### 知識層面 (Knowledge)

完成本專案後，學習者將能夠：

- ✅ 理解 `if-elif-else` 多重條件判斷的應用場景
- ✅ 掌握 `while` 迴圈的終止條件設計
- ✅ 認識 `random` 模組的基本用法
- ✅ 理解計數器變數在迴圈中的作用
- ✅ 了解 `break` 如何跳出迴圈

### 技能層面 (Skills)

- ✅ 能使用比較運算子進行數值判斷
- ✅ 能設計複雜的迴圈控制邏輯
- ✅ 能處理使用者輸入與驗證
- ✅ 能使用 `try-except` 處理輸入錯誤
- ✅ 能撰寫清晰的程式流程與註解

### 態度層面 (Attitudes)

- ✅ 培養邏輯推理與除錯能力
- ✅ 學習設計使用者友善的互動介面
- ✅ 養成測試邊界條件的習慣
- ✅ 建立模組化程式設計思維

---

## 🛠️ 開發指南

### 階段 1：基本猜數字遊戲 (2-3 小時)

**目標**：完成核心遊戲邏輯，無次數限制

**實作步驟**：
1. 使用 `random.randint(1, 100)` 產生隨機數
2. 使用 `while True` 建立無窮迴圈
3. 使用 `input()` 取得玩家猜測
4. 使用 `if-elif-else` 判斷猜測結果
5. 答對時使用 `break` 跳出迴圈

**檢核點**：
- [ ] 能正確產生 1-100 隨機數
- [ ] 能提示「太大」、「太小」、「答對了」
- [ ] 答對時遊戲結束

**範例輸出**：
```
請輸入你的猜測 (1-100): 50
太小了！
請輸入你的猜測 (1-100): 75
太大了！
請輸入你的猜測 (1-100): 63
答對了！
```

---

### 階段 2：加入次數限制與勝負判定 (2-3 小時)

**目標**：加入遊戲規則完整性

**實作步驟**：
1. 新增計數器變數 `attempts = 0`
2. 修改迴圈條件為 `while attempts < MAX_ATTEMPTS`
3. 每次猜測後 `attempts += 1`
4. 顯示當前是第幾次猜測
5. 用完次數後顯示失敗訊息與正確答案

**檢核點**：
- [ ] 限制最多 7 次機會
- [ ] 顯示當前猜測次數
- [ ] 用完次數後公布答案
- [ ] 勝利時顯示總共猜了幾次

**範例輸出**：
```
=== 終極密碼遊戲 ===
範圍：1-100，你有 7 次機會！

第 1 次猜測：50
太小了！

第 2 次猜測：75
太大了！

第 3 次猜測：63
答對了！你總共猜了 3 次。
```

---

### 階段 3：進階功能 (2-3 小時)

**目標**：提升遊戲體驗與可玩性

**實作功能**：

#### 3.1 難度選擇
- 簡單：1-50，10 次機會
- 中等：1-100，7 次機會
- 困難：1-200，6 次機會

#### 3.2 猜測歷史記錄
- 使用串列儲存每次猜測
- 每次猜測後顯示歷史記錄

#### 3.3 重新遊戲
- 遊戲結束後詢問「再玩一次？」
- 使用外層迴圈控制多局遊戲

#### 3.4 統計資訊
- 記錄總遊戲次數
- 計算勝率

**檢核點**：
- [ ] 提供難度選擇介面
- [ ] 顯示猜測歷史
- [ ] 支援重新遊戲
- [ ] 顯示統計資訊

**範例輸出**：
```
=== 終極密碼遊戲 ===
選擇難度 (1: 簡單, 2: 中等, 3: 困難): 2
範圍：1-100，你有 7 次機會！

第 1 次猜測：50
太小了！
猜測歷史：[50]

第 2 次猜測：75
太大了！
猜測歷史：[50, 75]

第 3 次猜測：63
答對了！你總共猜了 3 次。
猜測歷史：[50, 75, 63]

再玩一次？(y/n): n
遊戲統計：總共玩了 1 局，勝利 1 局，勝率 100.00%
感謝遊玩！
```

---

## 📊 評分標準

### 基本功能 (60%)

| 項目 | 配分 | 評分標準 |
|:-----|:-----|:---------|
| **隨機數生成** | 10% | 正確使用 `random.randint()` 產生範圍內隨機數 |
| **輸入處理** | 10% | 能正確取得並轉換使用者輸入 |
| **判斷邏輯** | 15% | 使用 `if-elif-else` 正確判斷「太大」、「太小」、「答對」 |
| **迴圈控制** | 15% | 使用 `while` 迴圈控制遊戲流程，答對時正確跳出 |
| **次數限制** | 10% | 正確實作 7 次猜測限制與計數器 |

### 程式品質 (20%)

| 項目 | 配分 | 評分標準 |
|:-----|:-----|:---------|
| **錯誤處理** | 8% | 使用 `try-except` 處理非數字輸入與範圍外數字 |
| **程式碼風格** | 6% | 符合 PEP 8 規範（縮排、命名、空行） |
| **註解完整性** | 6% | 關鍵邏輯有清楚註解說明 |

### 進階功能 (20%)

| 項目 | 配分 | 評分標準 |
|:-----|:-----|:---------|
| **難度選擇** | 8% | 提供至少 2 種難度選項 |
| **猜測歷史** | 6% | 顯示所有猜測記錄 |
| **重新遊戲** | 6% | 支援多局遊戲與統計 |

**總分計算**：基本功能 + 程式品質 + 進階功能 = 100%

**及格標準**：60 分（完成所有基本功能）

---

## 👨‍🏫 教學建議

### 評分重點

#### 必須檢查的項目
1. **邊界條件測試**：
   - 輸入數字 1（最小值）
   - 輸入數字 100（最大值）
   - 輸入 0 或 101（範圍外）
   - 輸入非數字（如 "abc"）

2. **迴圈邏輯**：
   - 是否會造成無窮迴圈
   - 次數計算是否正確
   - `break` 是否在正確位置

3. **使用者體驗**：
   - 提示訊息是否清楚
   - 輸入格式說明是否完整
   - 錯誤訊息是否友善

### 常見問題與解法

#### 問題 1：無窮迴圈
**症狀**：程式一直執行，無法結束

**原因**：
- 忘記更新迴圈計數器 `attempts += 1`
- `break` 條件永遠不會成立
- 迴圈條件設計錯誤

**解法**：
```python
# ❌ 錯誤：忘記更新計數器
while attempts < 7:
    guess = int(input("猜測："))
    # 忘記 attempts += 1

# ✅ 正確
while attempts < 7:
    guess = int(input("猜測："))
    attempts += 1  # 每次猜測後更新
```

#### 問題 2：邊界條件錯誤
**症狀**：輸入 1 或 100 時判斷錯誤

**原因**：
- 使用 `randint(1, 99)` 而非 `randint(1, 100)`
- 提示訊息與實際範圍不符

**解法**：
```python
# ❌ 錯誤：範圍只到 99
secret = random.randint(1, 99)

# ✅ 正確：包含 100
secret = random.randint(1, 100)
```

#### 問題 3：輸入驗證不完整
**症狀**：輸入非數字時程式崩潰

**原因**：
- 未使用 `try-except` 捕捉 `ValueError`
- 未檢查輸入範圍

**解法**：
```python
# ❌ 錯誤：直接轉換可能出錯
guess = int(input("猜測："))

# ✅ 正確：加入錯誤處理
try:
    guess = int(input("猜測："))
    if guess < 1 or guess > 100:
        print("請輸入 1-100 之間的數字！")
        continue
except ValueError:
    print("請輸入有效的數字！")
    continue
```

#### 問題 4：次數計算錯誤
**症狀**：顯示「第 0 次猜測」或次數比預期多 1

**原因**：
- 計數器初始值設為 1
- 在錯誤位置更新計數器

**解法**：
```python
# ✅ 正確：先更新計數器再顯示
attempts = 0
while attempts < MAX_ATTEMPTS:
    attempts += 1
    print(f"第 {attempts} 次猜測：", end="")
    guess = int(input())
```

### 教學時機建議

#### 課堂演示 (30 分鐘)
1. 展示基本版遊戲執行過程
2. 解說核心邏輯（隨機數、判斷、迴圈）
3. 示範一次完整的除錯過程

#### 學生實作 (3-4 小時)
1. 階段 1：基本猜數字 (1.5 小時)
2. 階段 2：次數限制 (1.5 小時)
3. 階段 3：進階功能 (自由選擇)

#### 成果發表 (30 分鐘)
1. 學生展示作品
2. 分享實作困難與解決方法
3. 教師點評與改進建議

---

## 🚀 延伸挑戰

### Challenge 1：多人對戰模式
**難度**：⭐⭐⭐☆☆

**需求**：
- 兩位玩家輪流猜測
- 誰先猜中誰獲勝
- 顯示雙方猜測歷史

**提示**：使用變數記錄當前玩家，每回合切換

### Challenge 2：智能提示系統
**難度**：⭐⭐⭐⭐☆

**需求**：
- 提示次數有限（如 3 次）
- 每次提示縮小 50% 範圍
- 玩家主動要求提示

**範例**：
```
目前範圍：1-100
使用提示 1：答案在 1-50 之間
使用提示 2：答案在 25-50 之間
使用提示 3：答案在 38-50 之間
```

### Challenge 3：圖形化介面
**難度**：⭐⭐⭐⭐⭐

**需求**：
- 使用 `tkinter` 建立 GUI
- 按鈕輸入取代文字輸入
- 視覺化猜測範圍（如進度條）

**學習資源**：需先學習 GUI 程式設計基礎

### Challenge 4：AI 自動猜測
**難度**：⭐⭐⭐⭐☆

**需求**：
- 電腦使用二分搜尋法猜測
- 比較玩家與 AI 的猜測次數
- 分析最佳策略

**提示**：每次猜測範圍中間值，保證 log₂(100) ≈ 7 次內完成

---

## 📚 相關資源

### 複習章節
- [Ch04 - 條件判斷](../../fundamentals/ch04-conditionals/)
- [Ch05 - 基礎迴圈](../../fundamentals/ch05-basic-loops/)
- [Ch06 - 進階迴圈](../../fundamentals/ch06-advanced-iteration/)

### Python 官方文件
- [random 模組](https://docs.python.org/zh-tw/3/library/random.html)
- [控制流程](https://docs.python.org/zh-tw/3/tutorial/controlflow.html)

### 遊戲設計理論
- [遊戲平衡性設計](https://en.wikipedia.org/wiki/Game_balance)
- [二分搜尋法](https://zh.wikipedia.org/wiki/%E4%BA%8C%E5%88%86%E6%90%9C%E5%B0%8B%E6%BC%94%E7%AE%97%E6%B3%95)

---

## 📝 專案檔案

| 檔案 | 說明 |
|:-----|:-----|
| `README.md` | 本檔案，專案說明與教學指引 |
| `requirements.ipynb` | 詳細需求規格與測試案例 |
| `starter-code.ipynb` | 起始程式碼模板 |
| `solution.ipynb` | 完整參考解答（基本版 + 進階版） |

---

**最後更新**：2025-10-05
**維護者**：iSpan Python 教學團隊
