# Chapter 17: å°è£èˆ‡è³‡è¨Šéš±è— | Encapsulation and Information Hiding

## ğŸ“š ç« ç¯€è³‡è¨Šï¼ˆChapter Informationï¼‰

| é …ç›® | å…§å®¹ |
|:-----|:-----|
| **å­¸ç¿’æ™‚æ•¸** | 3 å°æ™‚ï¼ˆ1.5 å°æ™‚ç†è«– + 1.5 å°æ™‚å¯¦ä½œï¼‰ |
| **é›£åº¦ç­‰ç´š** | â­â­â­â˜†â˜† (3/5) |
| **å…ˆå‚™çŸ¥è­˜** | Chapter 16ï¼ˆé¡åˆ¥èˆ‡ç‰©ä»¶ï¼‰|
| **ç›¸é—œç« ç¯€** | Chapter 18ï¼ˆç¹¼æ‰¿èˆ‡å¤šå‹ï¼‰ã€Chapter 19ï¼ˆç‰¹æ®Šæ–¹æ³•ï¼‰ |

---

## ğŸ¯ å­¸ç¿’ç›®æ¨™ï¼ˆLearning Objectivesï¼‰

å®Œæˆæœ¬ç« å¾Œï¼Œå­¸ç¿’è€…æ‡‰èƒ½å¤ ï¼š

### çŸ¥è­˜é¢ï¼ˆKnowledgeï¼‰
- **åˆ—å‡º** Python çš„å­˜å–æ§åˆ¶ç´„å®šï¼ˆpublic, protected, privateï¼‰
- **å®šç¾©** å°è£ã€è³‡è¨Šéš±è—ã€name mangling çš„æ¦‚å¿µ
- **èªªæ˜** @property è£é£¾å™¨çš„ä½œç”¨èˆ‡èªæ³•

### ç†è§£é¢ï¼ˆComprehensionï¼‰
- **è§£é‡‹** ç‚ºä»€éº¼éœ€è¦å°è£ï¼ˆè³‡æ–™ä¿è­·ã€ä»‹é¢è¨­è¨ˆï¼‰
- **æ¯”è¼ƒ** å…¬é–‹å±¬æ€§ã€ä¿è­·å±¬æ€§ã€ç§æœ‰å±¬æ€§çš„å·®ç•°
- **æ­¸ç´** property èˆ‡ç›´æ¥å­˜å–å±¬æ€§çš„å„ªç¼ºé»

### æ‡‰ç”¨é¢ï¼ˆApplicationï¼‰
- **é‹ç”¨** ç§æœ‰å±¬æ€§ä¿è­·é¡åˆ¥å…§éƒ¨ç‹€æ…‹
- **å¯¦ä½œ** ä½¿ç”¨ @property å»ºç«‹å—æ§çš„å±¬æ€§å­˜å–
- **è§£æ±º** éœ€è¦é©—è­‰èˆ‡è¨ˆç®—çš„å±¬æ€§è¨­è¨ˆå•é¡Œ

### åˆ†æé¢ï¼ˆAnalysisï¼‰
- **åˆ†æ** ä½•æ™‚æ‡‰è©²å°‡å±¬æ€§è¨­ç‚ºç§æœ‰
- **è¨ºæ–·** å°è£è¨­è¨ˆçš„å¸¸è¦‹éŒ¯èª¤ï¼ˆéåº¦å°è£ã€éŒ¯èª¤çš„å­˜å–ç´šåˆ¥ï¼‰
- **é¸æ“‡** é©ç•¶çš„å°è£ç­–ç•¥ï¼ˆç›´æ¥å­˜å– vs getter/setter vs propertyï¼‰

---

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µï¼ˆKey Conceptsï¼‰

### æ¦‚å¿µåœ°åœ–
```
å°è£èˆ‡è³‡è¨Šéš±è—
â”œâ”€â”€ ç‚ºä»€éº¼éœ€è¦å°è£ï¼Ÿ
â”‚   â”œâ”€â”€ ä¿è­·è³‡æ–™å®Œæ•´æ€§
â”‚   â”œâ”€â”€ æ§åˆ¶å­˜å–æ–¹å¼
â”‚   â”œâ”€â”€ éš±è—å¯¦ä½œç´°ç¯€
â”‚   â””â”€â”€ ç¶­è­·ä¸è®Šå¼ï¼ˆinvariantsï¼‰
â”‚
â”œâ”€â”€ Python çš„å­˜å–æ§åˆ¶ç´„å®š
â”‚   â”œâ”€â”€ Publicï¼ˆå…¬é–‹ï¼‰- name
â”‚   â”œâ”€â”€ Protectedï¼ˆä¿è­·ï¼‰- _name
â”‚   â””â”€â”€ Privateï¼ˆç§æœ‰ï¼‰- __name
â”‚
â”œâ”€â”€ Name Manglingï¼ˆåç¨±ä¿®é£¾ï¼‰
â”‚   â”œâ”€â”€ __name â†’ _ClassName__name
â”‚   â”œâ”€â”€ é¿å…å­é¡åˆ¥è¦†å¯«
â”‚   â””â”€â”€ éçœŸæ­£çš„ç§æœ‰åŒ–
â”‚
â”œâ”€â”€ Property è£é£¾å™¨
â”‚   â”œâ”€â”€ @propertyï¼ˆgetterï¼‰
â”‚   â”œâ”€â”€ @name.setterï¼ˆsetterï¼‰
â”‚   â”œâ”€â”€ @name.deleterï¼ˆdeleterï¼‰
â”‚   â””â”€â”€ è®“æ–¹æ³•çœ‹èµ·ä¾†åƒå±¬æ€§
â”‚
â””â”€â”€ å°è£è¨­è¨ˆæ¨¡å¼
    â”œâ”€â”€ Read-only propertiesï¼ˆå”¯è®€å±¬æ€§ï¼‰
    â”œâ”€â”€ Computed propertiesï¼ˆè¨ˆç®—å±¬æ€§ï¼‰
    â”œâ”€â”€ Validated propertiesï¼ˆé©—è­‰å±¬æ€§ï¼‰
    â””â”€â”€ Lazy propertiesï¼ˆå»¶é²è¨ˆç®—ï¼‰
```

### First Principles è§£æ

#### ç‚ºä»€éº¼éœ€è¦å°è£ï¼Ÿ

**æ ¹æœ¬å•é¡Œ**ï¼šå¦‚ä½•é˜²æ­¢å¤–éƒ¨ä»£ç¢¼ç›´æ¥ä¿®æ”¹ç‰©ä»¶å…§éƒ¨ç‹€æ…‹ï¼Œå°è‡´ç‰©ä»¶é€²å…¥ç„¡æ•ˆç‹€æ…‹ï¼Ÿ

**æƒ…å¢ƒæ¼”ç¤º**ï¼š
```python
# æ²’æœ‰å°è£ï¼šéŠ€è¡Œå¸³æˆ¶é¤˜é¡å¯ä»¥è¢«éš¨æ„ä¿®æ”¹
class BankAccount:
    def __init__(self, balance):
        self.balance = balance  # å…¬é–‹å±¬æ€§

account = BankAccount(1000)
account.balance = -500  # âŒ å¯ä»¥è¨­å®šç‚ºè² æ•¸ï¼é€™ä¸åˆç†
print(account.balance)  # -500
```

**ä½¿ç”¨å°è£è§£æ±º**ï¼š
```python
class BankAccount:
    def __init__(self, balance):
        self.__balance = balance  # ç§æœ‰å±¬æ€§

    def deposit(self, amount):
        if amount > 0:
            self.__balance += amount

    def withdraw(self, amount):
        if 0 < amount <= self.__balance:
            self.__balance -= amount

    def get_balance(self):
        return self.__balance

account = BankAccount(1000)
# account.__balance = -500  # âŒ AttributeErrorï¼ˆç„¡æ³•ç›´æ¥å­˜å–ï¼‰
account.withdraw(200)  # âœ… é€éå—æ§çš„æ–¹æ³•æ“ä½œ
print(account.get_balance())  # 800
```

**æ¨å°éç¨‹**ï¼š
1. ç›´æ¥å­˜å–å±¬æ€§ â†’ å¯èƒ½é•åæ¥­å‹™è¦å‰‡
2. éš±è—å…§éƒ¨å¯¦ä½œ â†’ ä½¿ç”¨ç§æœ‰å±¬æ€§ï¼ˆ`__name`ï¼‰
3. æä¾›å—æ§ä»‹é¢ â†’ è¨­è¨ˆå…¬é–‹æ–¹æ³•æ§åˆ¶å­˜å–
4. ä¿æŒè³‡æ–™ä¸€è‡´æ€§ â†’ åœ¨æ–¹æ³•ä¸­åŠ å…¥é©—è­‰é‚è¼¯

---

#### ç‚ºä»€éº¼éœ€è¦ Propertyï¼Ÿ

**æ ¹æœ¬å•é¡Œ**ï¼šå¦‚ä½•åœ¨ä¿æŒç°¡æ½”èªæ³•çš„åŒæ™‚ï¼ŒåŠ å…¥é©—è­‰èˆ‡è¨ˆç®—é‚è¼¯ï¼Ÿ

**æ¼”åŒ–éç¨‹**ï¼š
```python
# éšæ®µ 1ï¼šç›´æ¥å­˜å–ï¼ˆç„¡é©—è­‰ï¼‰
class Person:
    def __init__(self, age):
        self.age = age

p = Person(25)
p.age = -10  # âŒ å¯ä»¥è¨­å®šç‚ºè² æ•¸

# éšæ®µ 2ï¼šä½¿ç”¨ getter/setterï¼ˆèªæ³•ç¹ç‘£ï¼‰
class Person:
    def __init__(self, age):
        self.__age = age

    def get_age(self):
        return self.__age

    def set_age(self, value):
        if value >= 0:
            self.__age = value

p = Person(25)
p.set_age(30)  # èªæ³•ä¸ç›´è§€
print(p.get_age())

# éšæ®µ 3ï¼šä½¿ç”¨ @propertyï¼ˆèªæ³•å„ªé›… + æœ‰é©—è­‰ï¼‰
class Person:
    def __init__(self, age):
        self._age = age

    @property
    def age(self):
        return self._age

    @age.setter
    def age(self, value):
        if value >= 0:
            self._age = value
        else:
            raise ValueError("å¹´é½¡ä¸èƒ½ç‚ºè² æ•¸")

p = Person(25)
p.age = 30  # âœ… åƒå±¬æ€§ä¸€æ¨£ä½¿ç”¨ï¼Œä½†æœ‰é©—è­‰
print(p.age)  # 30
# p.age = -10  # ValueError
```

---

#### Name Mangling çš„é‹ä½œåŸç†

**æ ¹æœ¬å•é¡Œ**ï¼šå¦‚ä½•çœŸæ­£é˜»æ­¢å±¬æ€§è¢«å¤–éƒ¨å­˜å–ï¼Ÿ

**Python çš„å¯¦ä½œ**ï¼š
```python
class MyClass:
    def __init__(self):
        self.__private = "secret"  # ç§æœ‰å±¬æ€§

obj = MyClass()
# print(obj.__private)  # AttributeError

# å¯¦éš›ä¸Š Python å°‡ __private æ”¹åç‚º _MyClass__private
print(obj._MyClass__private)  # "secret"ï¼ˆä»å¯å­˜å–ï¼Œä½†ä¸é¼“å‹µï¼‰
```

**é‡è¦èªçŸ¥**ï¼š
- Python æ²’æœ‰çœŸæ­£çš„ç§æœ‰åŒ–ï¼ˆèˆ‡ Java/C++ ä¸åŒï¼‰
- `__name` åªæ˜¯å‘½åæ…£ä¾‹ + name mangling
- ç›®çš„æ˜¯é˜²æ­¢æ„å¤–å­˜å–ï¼Œè€Œéå¼·åˆ¶é™åˆ¶
- ã€ŒWe're all consenting adults hereã€åŸå‰‡

---

## ğŸ“– é‡è¦è¡“èªï¼ˆä¸­è‹±å°ç…§ï¼‰

| ä¸­æ–‡ | English | å®šç¾© |
|:-----|:--------|:-----|
| å°è£ | Encapsulation | å°‡è³‡æ–™èˆ‡æ“ä½œè³‡æ–™çš„æ–¹æ³•ç¶å®šåœ¨ä¸€èµ·ï¼Œéš±è—å…§éƒ¨å¯¦ä½œç´°ç¯€ |
| è³‡è¨Šéš±è— | Information Hiding | éš±è—ç‰©ä»¶å…§éƒ¨ç‹€æ…‹ï¼Œåªé€éå…¬é–‹ä»‹é¢å­˜å– |
| å…¬é–‹å±¬æ€§ | Public Attribute | ç„¡å‰ç¶´ï¼Œå¯è‡ªç”±å­˜å–çš„å±¬æ€§ï¼ˆ`name`ï¼‰ |
| ä¿è­·å±¬æ€§ | Protected Attribute | å–®åº•ç·šå‰ç¶´ï¼Œç´„å®šç‚ºå…§éƒ¨ä½¿ç”¨ï¼ˆ`_name`ï¼‰ |
| ç§æœ‰å±¬æ€§ | Private Attribute | é›™åº•ç·šå‰ç¶´ï¼Œè§¸ç™¼ name manglingï¼ˆ`__name`ï¼‰ |
| åç¨±ä¿®é£¾ | Name Mangling | Python è‡ªå‹•å°‡ `__name` æ”¹ç‚º `_ClassName__name` |
| å±¬æ€§è£é£¾å™¨ | Property Decorator | ä½¿æ–¹æ³•åƒå±¬æ€§ä¸€æ¨£å­˜å–ï¼ˆ`@property`ï¼‰ |
| Getter | Getter | å–å¾—å±¬æ€§å€¼çš„æ–¹æ³• |
| Setter | Setter | è¨­å®šå±¬æ€§å€¼çš„æ–¹æ³• |
| Deleter | Deleter | åˆªé™¤å±¬æ€§çš„æ–¹æ³• |
| å”¯è®€å±¬æ€§ | Read-only Property | åªæœ‰ getterï¼Œç„¡ setter çš„å±¬æ€§ |
| è¨ˆç®—å±¬æ€§ | Computed Property | æ¯æ¬¡å­˜å–æ™‚é‡æ–°è¨ˆç®—çš„å±¬æ€§ |
| é©—è­‰å±¬æ€§ | Validated Property | è¨­å®šæ™‚é€²è¡Œé©—è­‰çš„å±¬æ€§ |
| ä¸è®Šå¼ | Invariant | ç‰©ä»¶å¿…é ˆå§‹çµ‚æ»¿è¶³çš„æ¢ä»¶ |

---

## ğŸ“š æ•™æå…§å®¹ï¼ˆCourse Materialsï¼‰

### æª”æ¡ˆèªªæ˜

| æª”æ¡ˆ | èªªæ˜ | é è¨ˆæ™‚é•· | ä½¿ç”¨æ™‚æ©Ÿ |
|:-----|:-----|:---------|:---------|
| `01-lecture.ipynb` | ğŸ“– ç†è«–è¬›ç¾©èˆ‡ç¯„ä¾‹æ¼”ç¤ºï¼ˆ8 å€‹ç¯„ä¾‹ï¼‰ | 60 åˆ†é˜ | èª²å ‚è¬›æˆ |
| `02-worked-examples.ipynb` | ğŸ’¡ è©³è§£ç¯„ä¾‹ï¼ˆ5 é¡Œï¼‰ | 30 åˆ†é˜ | èª²å ‚æ¼”ç·´ |
| `03-practice.ipynb` | ğŸ› ï¸ èª²å ‚ç·´ç¿’ï¼ˆ10 é¡Œï¼‰ | 30 åˆ†é˜ | éš¨å ‚å¯¦ä½œ |
| `04-exercises.ipynb` | âœï¸ èª²å¾Œç¿’é¡Œï¼ˆ15 é¡Œï¼‰ | 60 åˆ†é˜ | èª²å¾Œè‡ªç¿’ |
| `05-solutions.ipynb` | âœ… ç¿’é¡Œå®Œæ•´è§£ç­” | åƒè€ƒç”¨ | è‡ªæˆ‘æª¢æ ¸ |
| `quiz.ipynb` | ğŸ“ è‡ªæˆ‘æ¸¬é©—ï¼ˆ25 é¡Œï¼‰ | 20 åˆ†é˜ | å­¸ç¿’é©—æ”¶ |

### å­¸ç¿’æµç¨‹å»ºè­°
1. **é ç¿’**ï¼ˆ20 minï¼‰ï¼šé–±è®€æœ¬ READMEï¼Œç†è§£å°è£çš„å¿…è¦æ€§
2. **ä¸Šèª²**ï¼ˆ90 minï¼‰ï¼š
   - è¬›ç¾©å­¸ç¿’ï¼ˆ60 minï¼‰ï¼š`01-lecture.ipynb`
   - ç¯„ä¾‹æ¼”ç·´ï¼ˆ30 minï¼‰ï¼š`02-worked-examples.ipynb`
3. **èª²å ‚ç·´ç¿’**ï¼ˆ30 minï¼‰ï¼šå®Œæˆ `03-practice.ipynb`
4. **èª²å¾Œè¤‡ç¿’**ï¼ˆ60 minï¼‰ï¼š
   - å®Œæˆç¿’é¡Œï¼ˆ45 minï¼‰ï¼š`04-exercises.ipynb`
   - å°ç…§è§£ç­”ï¼ˆ15 minï¼‰ï¼š`05-solutions.ipynb`
5. **è‡ªæˆ‘æ¸¬é©—**ï¼ˆ20 minï¼‰ï¼š`quiz.ipynb`

---

## ğŸ› ï¸ å¯¦ä½œèƒ½åŠ›æª¢æ ¸ï¼ˆCompetency Checklistï¼‰

å®Œæˆæœ¬ç« å¾Œï¼Œè«‹ç¢ºèªæ‚¨èƒ½å¤ ï¼š

### åŸºæœ¬èƒ½åŠ›
- [ ] èƒ½å€åˆ† publicã€protectedã€private å±¬æ€§çš„å‘½åæ…£ä¾‹
- [ ] èƒ½ä½¿ç”¨ `__name` å»ºç«‹ç§æœ‰å±¬æ€§
- [ ] èƒ½ä½¿ç”¨ `@property` å»ºç«‹ getter
- [ ] èƒ½ä½¿ç”¨ `@name.setter` å»ºç«‹ setter

### é€²éšèƒ½åŠ›
- [ ] èƒ½ç†è§£ name mangling çš„é‹ä½œæ©Ÿåˆ¶
- [ ] èƒ½è¨­è¨ˆå”¯è®€å±¬æ€§ï¼ˆåªæœ‰ getterï¼‰
- [ ] èƒ½è¨­è¨ˆè¨ˆç®—å±¬æ€§ï¼ˆå‹•æ…‹è¨ˆç®—å€¼ï¼‰
- [ ] èƒ½åœ¨ setter ä¸­åŠ å…¥é©—è­‰é‚è¼¯
- [ ] èƒ½ä½¿ç”¨ `@property` é‡æ§‹ç¾æœ‰é¡åˆ¥

### æ‡‰ç”¨èƒ½åŠ›
- [ ] èƒ½åˆ¤æ–·å“ªäº›å±¬æ€§æ‡‰è©²è¨­ç‚ºç§æœ‰
- [ ] èƒ½è¨­è¨ˆåˆç†çš„é¡åˆ¥å°è£ä»‹é¢
- [ ] èƒ½åœ¨å¯¦éš›å°ˆæ¡ˆä¸­é‹ç”¨å°è£åŸå‰‡
- [ ] èƒ½è§£é‡‹å°è£å¸¶ä¾†çš„ç¶­è­·æ€§å„ªå‹¢
- [ ] èƒ½é¿å…éåº¦å°è£èˆ‡éåº¦æš´éœ²

---

## ğŸ“ ç†è«–é‡é»ï¼ˆKey Theoretical Pointsï¼‰

### 1. Python çš„å­˜å–æ§åˆ¶ç´„å®š

| æ…£ä¾‹ | èªæ³• | æ„ç¾© | å­˜å–æ–¹å¼ |
|:-----|:-----|:-----|:---------|
| **Public** | `name` | å…¬é–‹å±¬æ€§ï¼Œè‡ªç”±å­˜å– | `obj.name` |
| **Protected** | `_name` | ä¿è­·å±¬æ€§ï¼Œç´„å®šç‚ºå…§éƒ¨ä½¿ç”¨ | `obj._name`ï¼ˆä¸å»ºè­°ï¼‰ |
| **Private** | `__name` | ç§æœ‰å±¬æ€§ï¼Œè§¸ç™¼ name mangling | `obj._ClassName__name`ï¼ˆæ¥µä¸å»ºè­°ï¼‰ |

**é‡è¦æé†’**ï¼š
- Python æ²’æœ‰çœŸæ­£çš„ç§æœ‰åŒ–ï¼ˆèˆ‡ Java/C++ ä¸åŒï¼‰
- é€™äº›æ˜¯**å‘½åæ…£ä¾‹**ï¼Œä¾è³´é–‹ç™¼è€…è‡ªå¾‹
- ã€ŒWe're all consenting adults hereã€å“²å­¸

---

### 2. Property è£é£¾å™¨èªæ³•

```python
class MyClass:
    def __init__(self, value):
        self._value = value

    @property
    def value(self):
        """Getterï¼šå–å¾—å€¼"""
        return self._value

    @value.setter
    def value(self, new_value):
        """Setterï¼šè¨­å®šå€¼ï¼ˆå¯åŠ é©—è­‰ï¼‰"""
        if new_value >= 0:
            self._value = new_value
        else:
            raise ValueError("å€¼ä¸èƒ½ç‚ºè² æ•¸")

    @value.deleter
    def value(self):
        """Deleterï¼šåˆªé™¤å±¬æ€§"""
        del self._value
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```python
obj = MyClass(10)
print(obj.value)  # å‘¼å« getter
obj.value = 20    # å‘¼å« setter
del obj.value     # å‘¼å« deleter
```

---

### 3. å°è£çš„å››ç¨®å¸¸è¦‹æ¨¡å¼

#### æ¨¡å¼ 1ï¼šå”¯è®€å±¬æ€§ï¼ˆRead-onlyï¼‰
```python
class Circle:
    def __init__(self, radius):
        self._radius = radius

    @property
    def area(self):
        """å”¯è®€å±¬æ€§ï¼šé¢ç©ï¼ˆæ²’æœ‰ setterï¼‰"""
        return 3.14159 * self._radius ** 2

c = Circle(5)
print(c.area)  # 78.53975
# c.area = 100  # AttributeErrorï¼ˆç„¡æ³•è¨­å®šï¼‰
```

#### æ¨¡å¼ 2ï¼šè¨ˆç®—å±¬æ€§ï¼ˆComputedï¼‰
```python
class Rectangle:
    def __init__(self, width, height):
        self._width = width
        self._height = height

    @property
    def area(self):
        """æ¯æ¬¡å­˜å–æ™‚é‡æ–°è¨ˆç®—"""
        return self._width * self._height

r = Rectangle(4, 5)
print(r.area)  # 20
r._width = 6
print(r.area)  # 30ï¼ˆè‡ªå‹•æ›´æ–°ï¼‰
```

#### æ¨¡å¼ 3ï¼šé©—è­‰å±¬æ€§ï¼ˆValidatedï¼‰
```python
class Person:
    def __init__(self, age):
        self._age = age

    @property
    def age(self):
        return self._age

    @age.setter
    def age(self, value):
        """è¨­å®šæ™‚é©—è­‰"""
        if not isinstance(value, int):
            raise TypeError("å¹´é½¡å¿…é ˆæ˜¯æ•´æ•¸")
        if value < 0 or value > 150:
            raise ValueError("å¹´é½¡å¿…é ˆåœ¨ 0-150 ä¹‹é–“")
        self._age = value
```

#### æ¨¡å¼ 4ï¼šå»¶é²è¨ˆç®—ï¼ˆLazyï¼‰
```python
class DataProcessor:
    def __init__(self, data):
        self._data = data
        self._result = None

    @property
    def result(self):
        """ç¬¬ä¸€æ¬¡å­˜å–æ™‚æ‰è¨ˆç®—"""
        if self._result is None:
            print("è¨ˆç®—ä¸­...")
            self._result = sum(self._data)  # æ˜‚è²´çš„è¨ˆç®—
        return self._result
```

---

### 4. Name Mangling è©³è§£

```python
class Parent:
    def __init__(self):
        self.__private = "parent secret"

class Child(Parent):
    def __init__(self):
        super().__init__()
        self.__private = "child secret"  # ä¸æœƒè¦†å¯«çˆ¶é¡åˆ¥çš„ __private

c = Child()
print(c._Parent__private)  # "parent secret"
print(c._Child__private)   # "child secret"
```

**é‹ä½œæ©Ÿåˆ¶**ï¼š
- `__private` â†’ `_ClassName__private`
- é¿å…å­é¡åˆ¥æ„å¤–è¦†å¯«çˆ¶é¡åˆ¥çš„ç§æœ‰å±¬æ€§
- ä»å¯é€éä¿®é£¾å¾Œçš„åç¨±å­˜å–ï¼ˆä½†ä¸æ‡‰è©²é€™éº¼åšï¼‰

---

## ğŸ“ æ•™å­¸å»ºè­°ï¼ˆTeaching Tipsï¼‰

### æˆèª²è¦é»

1. **å¾å¯¦éš›å•é¡Œåˆ‡å…¥**ï¼š
   - å…ˆå±•ç¤ºç„¡å°è£çš„å•é¡Œï¼ˆéŠ€è¡Œå¸³æˆ¶é¤˜é¡è¢«éš¨æ„ä¿®æ”¹ï¼‰
   - å†ä»‹ç´¹å°è£å¦‚ä½•è§£æ±ºå•é¡Œ
   - å¼·èª¿ã€Œä¿è­·è³‡æ–™å®Œæ•´æ€§ã€çš„é‡è¦æ€§

2. **é€æ­¥æ¼”åŒ–æ•™å­¸æ³•**ï¼š
   - ç¬¬ä¸€éšæ®µï¼šå…¬é–‹å±¬æ€§çš„é¢¨éšª
   - ç¬¬äºŒéšæ®µï¼šç§æœ‰å±¬æ€§ + getter/setter
   - ç¬¬ä¸‰éšæ®µï¼š@property çš„å„ªé›…èªæ³•
   - ç¬¬å››éšæ®µï¼šé€²éšæ¨¡å¼ï¼ˆå”¯è®€ã€è¨ˆç®—ã€é©—è­‰ï¼‰

3. **å°æ¯”å…¶ä»–èªè¨€**ï¼š
   - Python vs Java/C++ï¼ˆçœŸæ­£çš„ privateï¼‰
   - å¼·èª¿ Python çš„ã€Œæˆäººå“²å­¸ã€
   - èªªæ˜æ…£ä¾‹çš„é‡è¦æ€§ï¼ˆ`_name`, `__name`ï¼‰

4. **å¯¦éš›æ¡ˆä¾‹æ¼”ç¤º**ï¼š
   - BankAccountï¼ˆé¤˜é¡é©—è­‰ï¼‰
   - Userï¼ˆå¯†ç¢¼åŠ å¯†ï¼‰
   - Temperatureï¼ˆå–®ä½è½‰æ›ï¼‰
   - Rectangleï¼ˆè¨ˆç®—é¢ç©ï¼‰

---

### å¸¸è¦‹å­¸ç”Ÿå›°é›£é»

#### å›°é›£é» 1ï¼šä¸ç†è§£ç‚ºä½•éœ€è¦å°è£

**ç—‡ç‹€**ï¼šèªç‚ºã€Œç›´æ¥å­˜å–å±¬æ€§æ›´ç°¡å–®ã€

**è§£æ±ºæ–¹æ³•**ï¼š
- å±•ç¤ºç„¡é©—è­‰å°è‡´çš„éŒ¯èª¤è³‡æ–™
- èªªæ˜æœªä¾†éœ€æ±‚è®Šæ›´æ™‚çš„ç¶­è­·æˆæœ¬
- èˆ‰ä¾‹ï¼šå¦‚æœå¹´é½¡æ¬„ä½æ”¹ç‚ºã€Œå‡ºç”Ÿæ—¥æœŸã€ï¼Œæœ‰å°è£çš„é¡åˆ¥åªéœ€ä¿®æ”¹å…§éƒ¨å¯¦ä½œ

**å¯¦ä¾‹å°æ¯”**ï¼š
```python
# ç„¡å°è£ï¼šæœªä¾†éœ€æ±‚è®Šæ›´æ™‚ï¼Œæ‰€æœ‰ä½¿ç”¨è™•éƒ½è¦æ”¹
person.age = 25

# æœ‰å°è£ï¼šåªéœ€ä¿®æ”¹ property å…§éƒ¨é‚è¼¯
@property
def age(self):
    # å¯ä»¥å¾å‡ºç”Ÿæ—¥æœŸè¨ˆç®—
    return datetime.now().year - self._birth_year
```

---

#### å›°é›£é» 2ï¼šæ··æ·† `_name` èˆ‡ `__name`

**ç—‡ç‹€**ï¼šä¸çŸ¥ä½•æ™‚ç”¨å–®åº•ç·šã€ä½•æ™‚ç”¨é›™åº•ç·š

**è§£æ±ºæ–¹æ³•**ï¼š
- **å–®åº•ç·š `_name`**ï¼šç´„å®šç‚ºå…§éƒ¨ä½¿ç”¨ï¼Œä½†å¯å­˜å–ï¼ˆå»ºè­°ç”¨æ–¼ã€Œä¸å¸Œæœ›å¤–éƒ¨ç›´æ¥ç”¨ï¼Œä½†ä¹Ÿä¸å¼·åˆ¶é˜»æ­¢ã€ï¼‰
- **é›™åº•ç·š `__name`**ï¼šè§¸ç™¼ name manglingï¼Œé¿å…å­é¡åˆ¥è¦†å¯«ï¼ˆå»ºè­°ç”¨æ–¼ã€ŒçœŸæ­£éœ€è¦éš”é›¢çš„å±¬æ€§ã€ï¼‰

**å»ºè­°è¦å‰‡**ï¼š
- é è¨­ä½¿ç”¨ `_name`ï¼ˆ90% çš„æƒ…æ³ï¼‰
- åªåœ¨éœ€è¦é¿å…ç¹¼æ‰¿è¡çªæ™‚ä½¿ç”¨ `__name`

---

#### å›°é›£é» 3ï¼šProperty è£é£¾å™¨èªæ³•æ··æ·†

**ç—‡ç‹€**ï¼šä¸ç†è§£ç‚ºä½• setter ç”¨ `@name.setter` è€Œé `@setter`

**æ•™å­¸ç­–ç•¥**ï¼š
```python
# ç¬¬ä¸€æ­¥ï¼šå®šç¾© getterï¼ˆå‰µå»º property ç‰©ä»¶ï¼‰
@property
def age(self):
    return self._age

# ç¬¬äºŒæ­¥ï¼šåœ¨åŒä¸€å€‹ property ç‰©ä»¶ä¸Šå®šç¾© setter
@age.setter  # ä½¿ç”¨ age é€™å€‹ property ç‰©ä»¶çš„ setter æ–¹æ³•
def age(self, value):
    self._age = value
```

**è¨˜æ†¶å£è¨£**ï¼šã€Œå…ˆç”¨ `@property` å»ºç«‹å±¬æ€§ï¼Œå†ç”¨ `@å±¬æ€§å.setter` æ“´å……åŠŸèƒ½ã€

---

#### å›°é›£é» 4ï¼šéåº¦å°è£

**ç—‡ç‹€**ï¼šå°‡æ‰€æœ‰å±¬æ€§éƒ½è¨­ç‚ºç§æœ‰ï¼Œå³ä½¿ä¸éœ€è¦é©—è­‰

**è§£æ±ºæ–¹æ³•**ï¼š
- å¼·èª¿ã€ŒPythonicã€å“²å­¸ï¼šé è¨­å…¬é–‹ï¼Œå¿…è¦æ™‚æ‰å°è£
- è¦å‰‡ï¼šå¦‚æœå±¬æ€§éœ€è¦é©—è­‰ã€è¨ˆç®—ã€æˆ–éš±è—å¯¦ä½œï¼Œæ‰ä½¿ç”¨ property
- ç¯„ä¾‹ï¼šç°¡å–®çš„ `Point` é¡åˆ¥çš„ x, y åº§æ¨™ä¸éœ€è¦å°è£

**è‰¯å¥½è¨­è¨ˆ**ï¼š
```python
# âœ… ç°¡å–®è³‡æ–™é¡åˆ¥ï¼šå…¬é–‹å±¬æ€§
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

# âœ… éœ€è¦é©—è­‰ï¼šä½¿ç”¨ property
class BankAccount:
    @property
    def balance(self):
        return self._balance

    @balance.setter
    def balance(self, value):
        if value < 0:
            raise ValueError("é¤˜é¡ä¸èƒ½ç‚ºè² æ•¸")
        self._balance = value
```

---

## ğŸ’¡ å­¸ç¿’æŠ€å·§ï¼ˆLearning Strategiesï¼‰

### å°è£è¨­è¨ˆæ±ºç­–æ¨¹

```
æ˜¯å¦éœ€è¦å°å±¬æ€§é€²è¡Œæ§åˆ¶ï¼Ÿ
â”œâ”€ å¦ â†’ ä½¿ç”¨å…¬é–‹å±¬æ€§ï¼ˆself.nameï¼‰
â””â”€ æ˜¯
   â”œâ”€ åªéœ€é©—è­‰/è¨ˆç®—ï¼Ÿ â†’ ä½¿ç”¨ @property
   â”œâ”€ éœ€è¦éš±è—å¯¦ä½œï¼Ÿ â†’ ä½¿ç”¨ _name + @property
   â””â”€ éœ€è¦é¿å…ç¹¼æ‰¿è¡çªï¼Ÿ â†’ ä½¿ç”¨ __name
```

### å‘½åæ…£ä¾‹è¨˜æ†¶æ³•

- **ç„¡åº•ç·š**ï¼šå…¬é–‹çµ¦æ‰€æœ‰äººï¼ˆPublicï¼‰
- **å–®åº•ç·š**ï¼šå…§éƒ¨ä½¿ç”¨ï¼Œè«‹å‹¿ç¢°ï¼ˆProtectedï¼‰
- **é›™åº•ç·š**ï¼šç§æœ‰é ˜åŸŸï¼Œå­é¡åˆ¥ä¹Ÿåˆ¥ç¢°ï¼ˆPrivateï¼‰

### å¯¦ä½œç·´ç¿’å»ºè­°

1. **é‡æ§‹ç·´ç¿’**ï¼šå°‡å…¬é–‹å±¬æ€§æ”¹ç‚º property
2. **é©—è­‰ç·´ç¿’**ï¼šç‚ºä¸åŒé¡å‹å±¬æ€§åŠ å…¥é©—è­‰é‚è¼¯
3. **è¨ˆç®—å±¬æ€§ç·´ç¿’**ï¼šå¯¦ä½œè¡ç”Ÿå±¬æ€§ï¼ˆå¦‚ BMIã€é¢ç©ã€å…¨åï¼‰
4. **å”¯è®€å±¬æ€§ç·´ç¿’**ï¼šè¨­è¨ˆåªèƒ½è®€å–çš„å±¬æ€§

---

## ğŸ”— å»¶ä¼¸è³‡æºï¼ˆAdditional Resourcesï¼‰

### Python å®˜æ–¹æ–‡ä»¶
- [Property](https://docs.python.org/3/library/functions.html#property)
- [Private Variables](https://docs.python.org/3/tutorial/classes.html#private-variables)
- [Property Decorators](https://docs.python.org/3/howto/descriptor.html#properties)

### æ¨è–¦é–±è®€
- Lutz, M. (2013). *Learning Python* (5th ed.), Chapter 30: Class Design
- Ramalho, L. (2015). *Fluent Python*, Chapter 19: Dynamic Attributes and Properties
- Phillips, D. (2018). *Python 3 Object-Oriented Programming* (3rd ed.), Chapter 5: When to Use Object-Oriented Programming

### äº’å‹•å¼å·¥å…·
- [Python Tutor](http://pythontutor.com/) - è¦–è¦ºåŒ– name mangling
- [Real Python: Properties](https://realpython.com/python-property/)

### å»¶ä¼¸ä¸»é¡Œï¼ˆé€²éšå­¸ç¿’ï¼‰
- **Descriptors**ï¼šæ›´åº•å±¤çš„å±¬æ€§æ§åˆ¶æ©Ÿåˆ¶
- **__slots__**ï¼šé™åˆ¶å±¬æ€§ï¼Œç¯€çœè¨˜æ†¶é«”
- **Data Classes**ï¼ˆPython 3.7+ï¼‰ï¼šè‡ªå‹•ç”Ÿæˆç‰¹æ®Šæ–¹æ³•
- **@cached_property**ï¼šå¿«å–è¨ˆç®—çµæœ

---

## â“ å¸¸è¦‹å•é¡Œï¼ˆFAQï¼‰

**Q1: ä»€éº¼æ™‚å€™æ‡‰è©²ä½¿ç”¨ç§æœ‰å±¬æ€§ï¼Ÿ**

A: éµå¾ªä»¥ä¸‹åŸå‰‡ï¼š
- **éœ€è¦é©—è­‰**ï¼šç¢ºä¿è³‡æ–™æœ‰æ•ˆæ€§ï¼ˆå¦‚å¹´é½¡ >= 0ï¼‰
- **éœ€è¦è¨ˆç®—**ï¼šå±¬æ€§å€¼ç”±å…¶ä»–å±¬æ€§è¨ˆç®—è€Œä¾†
- **éš±è—å¯¦ä½œ**ï¼šå…§éƒ¨å¯¦ä½œå¯èƒ½è®Šæ›´ï¼Œä¸å¸Œæœ›å¤–éƒ¨ä¾è³´
- **ç¶­è­·ä¸è®Šå¼**ï¼šç¢ºä¿ç‰©ä»¶å§‹çµ‚è™•æ–¼æœ‰æ•ˆç‹€æ…‹

**Q2: `_name` å’Œ `__name` æœ‰ä»€éº¼å€åˆ¥ï¼Ÿ**

A:
- **`_name`ï¼ˆå–®åº•ç·šï¼‰**ï¼šç´„å®šç‚ºå…§éƒ¨ä½¿ç”¨ï¼Œä½†å¯å­˜å–
  - ç”¨æ–¼ï¼šä¸å¸Œæœ›å¤–éƒ¨ç›´æ¥ç”¨ï¼Œä½†ä¹Ÿä¸å¼·åˆ¶é™åˆ¶
  - ç¯„ä¾‹ï¼š`_internal_cache`

- **`__name`ï¼ˆé›™åº•ç·šï¼‰**ï¼šè§¸ç™¼ name mangling
  - ç”¨æ–¼ï¼šé¿å…å­é¡åˆ¥æ„å¤–è¦†å¯«
  - ç¯„ä¾‹ï¼š`__private_key`

**å»ºè­°**ï¼šé è¨­ç”¨ `_name`ï¼Œåªåœ¨çœŸæ­£éœ€è¦éš”é›¢æ™‚ç”¨ `__name`

---

**Q3: Property å’Œç›´æ¥å±¬æ€§å­˜å–æœ‰ä»€éº¼å·®åˆ¥ï¼Ÿ**

A:
```python
# ç›´æ¥å±¬æ€§ï¼šç°¡å–®ä½†ç„¡æ§åˆ¶
obj.age = -10  # âŒ å¯ä»¥è¨­å®šç„¡æ•ˆå€¼

# Propertyï¼šèªæ³•ç°¡æ½” + æœ‰æ§åˆ¶
@property
def age(self):
    return self._age

@age.setter
def age(self, value):
    if value >= 0:
        self._age = value  # âœ… æœ‰é©—è­‰

obj.age = 25  # çœ‹èµ·ä¾†åƒå±¬æ€§ï¼Œå¯¦éš›å‘¼å« setter
```

---

**Q4: ç‚ºä»€éº¼ Python æ²’æœ‰çœŸæ­£çš„ç§æœ‰åŒ–ï¼Ÿ**

A: Python çš„è¨­è¨ˆå“²å­¸ï¼š
- **ã€ŒWe're all consenting adults hereã€**ï¼šç›¸ä¿¡é–‹ç™¼è€…çš„è‡ªå¾‹
- éˆæ´»æ€§å„ªæ–¼å¼·åˆ¶é™åˆ¶
- å¦‚æœçœŸéœ€è¦å­˜å–å…§éƒ¨å±¬æ€§ï¼Œæ‡‰è©²å…è¨±ï¼ˆä½†è¦æ‰¿æ“”é¢¨éšªï¼‰
- Name mangling è¶³ä»¥é˜²æ­¢æ„å¤–å­˜å–

---

**Q5: ä½•æ™‚ä½¿ç”¨ @propertyï¼Œä½•æ™‚ä½¿ç”¨ getter/setter æ–¹æ³•ï¼Ÿ**

A:
- **ä½¿ç”¨ @property**ï¼ˆå»ºè­°ï¼‰ï¼š
  - å±¬æ€§çš„å–å¾—/è¨­å®šç¬¦åˆç›´è¦º
  - æƒ³è¦å„ªé›…çš„èªæ³•ï¼ˆ`obj.age = 25`ï¼‰
  - æœªä¾†å¯èƒ½åŠ å…¥é©—è­‰é‚è¼¯

- **ä½¿ç”¨ getter/setter æ–¹æ³•**ï¼š
  - æ“ä½œæ¯”è¼ƒè¤‡é›œï¼ˆå¦‚ `account.withdraw(100)`ï¼‰
  - èªæ„ä¸Šæ˜¯ã€Œå‹•ä½œã€è€Œéã€Œå±¬æ€§ã€
  - éœ€è¦å¤šå€‹åƒæ•¸

---

**Q6: å¦‚ä½•é‡æ§‹ç¾æœ‰é¡åˆ¥ï¼ŒåŠ å…¥å°è£ï¼Ÿ**

A: æ­¥é©Ÿï¼š
1. å°‡å…¬é–‹å±¬æ€§æ”¹ç‚º `_name`
2. å»ºç«‹ `@property` getterï¼ˆå›å‚³ `_name`ï¼‰
3. å»ºç«‹ `@name.setter`ï¼ŒåŠ å…¥é©—è­‰é‚è¼¯
4. æ¸¬è©¦ç¢ºä¿å¤–éƒ¨ä½¿ç”¨æ–¹å¼ä¸è®Š

```python
# é‡æ§‹å‰
class User:
    def __init__(self, age):
        self.age = age

# é‡æ§‹å¾Œ
class User:
    def __init__(self, age):
        self._age = age

    @property
    def age(self):
        return self._age

    @age.setter
    def age(self, value):
        if value >= 0:
            self._age = value
        else:
            raise ValueError("å¹´é½¡ä¸èƒ½ç‚ºè² æ•¸")

# å¤–éƒ¨ä½¿ç”¨æ–¹å¼ä¸è®Š
user = User(25)
user.age = 30  # ä»ç„¶å¯ç”¨ï¼Œä½†ç¾åœ¨æœ‰é©—è­‰
```

---

## ğŸ“Š æœ¬ç« èˆ‡èª²ç¨‹æ¶æ§‹çš„é—œä¿‚

### å‰ç½®ç« ç¯€
- **Chapter 16**ï¼šé¡åˆ¥èˆ‡ç‰©ä»¶ï¼ˆå°è£çš„åŸºç¤ï¼‰
- **Chapter 12**ï¼šå‡½å¼è¨­è¨ˆï¼ˆæ–¹æ³•çš„åŸºç¤ï¼‰

### å¾ŒçºŒç« ç¯€
- **Chapter 18**ï¼šç¹¼æ‰¿èˆ‡å¤šå‹ï¼ˆå°è£åœ¨ç¹¼æ‰¿ä¸­çš„æ‡‰ç”¨ï¼‰
- **Chapter 19**ï¼šç‰¹æ®Šæ–¹æ³•èˆ‡é‹ç®—å­é‡è¼‰ï¼ˆé€²éšé¡åˆ¥è¨­è¨ˆï¼‰
- **Chapter 20**ï¼šä¾‹å¤–è™•ç†ï¼ˆåœ¨ setter ä¸­æ‹‹å‡ºä¾‹å¤–ï¼‰

### å°æ‡‰çš„ Milestone å°ˆæ¡ˆ
- **Milestone 5: éŠ€è¡Œç³»çµ±**ï¼ˆæ•´åˆ Ch16-19 çš„ OOP æŠ€å·§ï¼‰

---

## ğŸ“ ç‰ˆæœ¬è¨˜éŒ„ï¼ˆVersion Historyï¼‰
- **v1.0** (2025-10-06): åˆç‰ˆç™¼å¸ƒï¼Œå®Œæ•´çš„å°è£èˆ‡è³‡è¨Šéš±è—æ•™æ

---

## ğŸ¯ æˆåŠŸæ¨™æº–ï¼ˆSuccess Criteriaï¼‰

å®Œæˆæœ¬ç« å­¸ç¿’å¾Œï¼Œæ‚¨æ‡‰è©²èƒ½å¤ ï¼š
- âœ… ç¨ç«‹å®Œæˆèª²å¾Œç¿’é¡Œï¼ˆæ­£ç¢ºç‡ â‰¥ 80%ï¼‰
- âœ… é€šéè‡ªæˆ‘æ¸¬é©—ï¼ˆåˆ†æ•¸ â‰¥ 20/25ï¼‰
- âœ… èƒ½å‘ä»–äººè§£é‡‹å°è£çš„å¿…è¦æ€§
- âœ… èƒ½åœ¨ 15 åˆ†é˜å…§ç‚ºé¡åˆ¥åŠ å…¥é©ç•¶çš„å°è£
- âœ… èƒ½è­˜åˆ¥ä¸¦ä¿®æ­£éåº¦å°è£æˆ–å°è£ä¸è¶³çš„è¨­è¨ˆ

---

**å­¸ç¿’æé†’**ï¼šå°è£æ˜¯ OOP çš„æ ¸å¿ƒåŸå‰‡ä¹‹ä¸€ï¼ŒæŒæ¡å°è£èƒ½è®“æ‚¨è¨­è¨ˆå‡ºæ›´å¥å£¯ã€æ˜“ç¶­è­·çš„é¡åˆ¥ï¼
